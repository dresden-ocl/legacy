--
----------------------------------------------------------------------
-- LoyaltyAccount
----------------------------------------------------------------------
package tudresden::ocl20::pivot::examples::royalsandloyals

context LoyaltyAccount::isEmpty(): Boolean 
  pre : true   
  post: result = (points = 0)

context LoyaltyAccount::points : Integer 
  init: 0
 
-- Added at 10/05/2007 15:08
context LoyaltyAccount
	def: getCostumerName():String = 'Test'

-- [AstGen] context LoyaltyAccount::transaction : Set(Transaction) 
-- [AstGen]  init: Set{}

context CustomerCard
  inv oneOwner: owner->asSet()->size() = 1

-- This property is not part of the model and this testcase does nothing new.
-- context LoyaltyAccount 
--  inv: transaction->size() = 1

context CustomerCard
  inv: transactions->select(oclIsTypeOf(Earning)).points->sum() > 0

context CustomerCard
   inv points: transactions.points->sum() > 0 
               implies 
               transactions->exists(t:Transaction | t.points > 0)

context CustomerCard 
  inv transactions: transactions.points->exists(p : Integer | p = 500)

endpackage
