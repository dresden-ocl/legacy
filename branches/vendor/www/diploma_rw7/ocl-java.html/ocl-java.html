<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.0//EN">
<!--Converted with LaTeX2HTML 99.2beta6 (1.42)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<title>Diploma Thesis: Utility Support for Checking OCL Business Rules in Java Programs</title>
<meta name="description" content="Diploma Thesis: Utility support for checking OCL business Rules in Java Programs">
<meta name="keywords" content="ocl-java">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="Generator" content="LaTeX2HTML v99.2beta6">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" href="ocl-java.css">
</head>
<body>
<!--Navigation Panel--><img width="81" height="24" align="BOTTOM" border="0" alt="next_inactive" src="file:/usr/local/lib/latex2html/icons/nx_grp_g.png"> <a name="tex2html1" href="../intro.html"><img width="26" height="24" align="BOTTOM" border="0" alt="up" src="file:/usr/local/lib/latex2html/icons/up.png"></a> <img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="file:/usr/local/lib/latex2html/icons/prev_g.png"> <br>
<b> Up:</b> <a name="tex2html2" href="../intro.html">Start</a> <br>
<br>
<!--End of Navigation Panel--> 

<h1 align="CENTER">Diploma Thesis:<br>
Utility Support for Checking OCL Business Rules in Java Programs</h1>

<p align="CENTER"><strong>Ralf Wiebicke</strong></p>

<p align="CENTER"><strong>May 2000</strong></p>

<h1><a name="SECTION00010000000000000000">Copyright</a></h1>

<p>Copyright &copy;&nbsp;2000 Ralf Wiebicke.</p>

<p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.1 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is available at http://www.gnu.org/copyleft/fdl.html.</p>

<h1><a name="SECTION00020000000000000000">Availability</a></h1>

<p>This document is available at http://www.inf.tu-dresden.de/~rw7/diplom00/ in several electronic forms including PostScript, PDF, Html and the original kLyx version.</p>

<h1><a name="SECTION00100000000000000000">Introduction</a></h1>

<h1><a name="SECTION00110000000000000000">OCL and Extreme Programming</a></h1>

<h1><a name="SECTION00200000000000000000">Code Generation</a></h1>

<h1><a name="SECTION00210000000000000000">Representation Of Associations</a></h1>

<h2><a name="SECTION00211000000000000000">Possibilities</a></h2>

<ul>
<li>Collections named by the role name (maps for qualified associations)</li>

<li>Methods (isEmployed)</li>
</ul>

<h2><a name="SECTION00212000000000000000">CASE-Tools</a></h2>

<h2><a name="SECTION00213000000000000000">Net-Linx</a></h2>

<p>Anpassbarkeit an vorhandenen Quellcode.</p>

<h1><a name="SECTION00220000000000000000">Model Information</a></h1>

<p>Needed for Type Checking.</p>

<p>There is already the Reflection Facade, which is pretty cool with two exception:</p>

<ol>
<li>no element types of associations.</li>

<li>no isquery tag</li>
</ol>

Solution: extend the java language. The new tag has a syntax like @see, but restricted to classes only. 

<dl compact>
<dd>class&nbsp;Person<br>
{<br>
&nbsp;&nbsp;/**<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;persons&nbsp;which&nbsp;are&nbsp;currently&nbsp;employed&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;this&nbsp;person.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@element-type&nbsp;Person<br>
&nbsp;&nbsp;*/<br>
&nbsp;&nbsp;Collection&nbsp;employees;<br>
}</dd>
</dl>

Cool implementation: an extension of the reflection api and the java compiler. 

<p>My implementation: A skript scanning the source code for these comments, and an extension of the reflection facade to use this information. (royloy.Person#employees=Person)</p>

<h4><a name="SECTION00220010000000000000">Where comes the tag?</a></h4>

<ul>
<li>CASE-Tools</li>

<li>handmade: good-practice of programming. Should be there already in the comments, the tag makes it available formally.</li>

<li>reverse enginieering. see chapter [reverse enginieering]</li>
</ul>

Will be tested automatically by the injected code. 

<p>Is a good help for further reengineering from Java to UML (Diplomarbeit Stefan Frisch?)</p>

<h1><a name="SECTION00300000000000000000">Code Injection</a></h1>

<h1><a name="SECTION00310000000000000000">Major Decisions</a></h1>

<ul>
<li>Reversable Transformation: 

<ul>
<li>Must be possible to clean the code from all injected fragments.</li>

<li>Must be possible to edit the transformed source code without losing all changes at the next injection.</li>

<li>Major reasons: 

<ul>
<li>the error messages pointing to the source code.</li>

<li>injection must be done only when the contraints heve been changed, not if the java source has been changed.</li>
</ul>
</li>
</ul>
</li>

<li>Method Wrapper</li>

<li>no import statements, explicit package qualifying in the generated code instead.</li>

<li>checking the @element-type</li>

<li>may be: Auslagerung von m&ouml;glichst viel code auf eine Extraklasse pro Klasse oder pro Package. Entlastung des CVS. Das hat niedrige Priorit&auml;t.</li>
</ul>

<h1><a name="SECTION00320000000000000000">Wrapping Methods</a></h1>

<p>Touching the code of each method is needed, because the generated code must be run on each call to the method.</p>

<p>Using wrapper methods avoids many problems which arise if there are several return statements in a method or a complex expression in the return statement. Also, there are no name conflicts anymore beetween the original and the generated code.</p>

<h4><a name="SECTION00320010000000000000">Example.</a></h4>

<p>This is, how it works: A method</p>

<dl compact>
<dd>int&nbsp;someMethod(double&nbsp;x)<br>
{<br>
&nbsp;&nbsp;//&nbsp;here&nbsp;comes&nbsp;the&nbsp;code.<br>
}&nbsp;</dd>
</dl>

is transformed into two methods: 

<dl compact>
<dd>int&nbsp;someMethod_wrappedbyocl(double&nbsp;x)<br>
{<br>
&nbsp;&nbsp;//&nbsp;here&nbsp;comes&nbsp;the&nbsp;code.<br>
}<br>
&nbsp;<br>
int&nbsp;someMethod(double&nbsp;x)<br>
{<br>
&nbsp;&nbsp;//&nbsp;some&nbsp;code&nbsp;checking&nbsp;invariants/preconditions.<br>
&nbsp;&nbsp;int&nbsp;result=someMethod_wrappedbyocl(x);<br>
&nbsp;&nbsp;//&nbsp;some&nbsp;code&nbsp;checking&nbsp;postconditions/invariants.<br>
}</dd>
</dl>

Slightly different and a bit tricky for constructors: 

<dl compact>
<dd>SomeClass(String&nbsp;x)<br>
{<br>
&nbsp;&nbsp;//&nbsp;here&nbsp;comes&nbsp;the&nbsp;code<br>
}</dd>
</dl>

gets to 

<dl compact>
<dd>SomeClass(String&nbsp;x,&nbsp;Void&nbsp;void)<br>
{<br>
&nbsp;&nbsp;//&nbsp;here&nbsp;comes&nbsp;the&nbsp;code<br>
}<br>
&nbsp;<br>
SomeClass(String&nbsp;x)<br>
{<br>
&nbsp;&nbsp;this(x,&nbsp;new&nbsp;Void());<br>
&nbsp;&nbsp;//&nbsp;some&nbsp;code&nbsp;checking&nbsp;postconditions/invariants.<br>
}</dd>
</dl>

<h1><a name="SECTION00400000000000000000">Reverse Engineering</a></h1>

<p>Avoid the UML model for type checking.</p>

<p>An interactive tool for injecting <tt>@element-type</tt> tags into the code using information obtained staticly from the source code or dynamicly on run time.</p>

<h1><a name="SECTION00410000000000000000">Static</a></h1>

<p>Given <tt>Collection&nbsp;employees</tt> look for <tt>void&nbsp;addEmployee(Person)</tt> or <tt>boolean&nbsp;isEmployee(Person)</tt>.</p>

<h1><a name="SECTION00420000000000000000">Dynamic</a></h1>

<ul>
<li>Enriche the code with tracing the object types inside collections.</li>

<li>compile and run the program (regression tests if available)</li>
</ul>

<h1><a name="SECTION00500000000000000000">About this document ...</a></h1>

<strong>Diploma Thesis:<br>
Utility Support for Checking OCL Business Rules in Java Programs</strong>
<p>This document was generated using the <a href="http://www-dsed.llnl.gov/files/programs/unix/latex2html/manual/"><strong>LaTeX</strong>2<tt>HTML</tt></a> translator Version 99.2beta6 (1.42)</p>

<p>Copyright &copy; 1993, 1994, 1995, 1996, <a href="http://cbl.leeds.ac.uk/nikos/personal.html">Nikos Drakos</a>, Computer Based Learning Unit, University of Leeds.<br>
Copyright &copy; 1997, 1998, 1999, <a href="http://www.maths.mq.edu.au/~ross/">Ross Moore</a>, Mathematics Department, Macquarie University, Sydney.</p>

<p>The command line arguments were:<br>
 <strong>latex2html</strong> <tt>-dir ocl-java.html -html_version 3.0 -split 0 -notransparent -white -up_url ../intro.html -up_title Start -lcase_tags ocl-java.tex</tt></p>

<p>The translation was initiated by Ralf Wiebicke on 2000-05-31</p>

<hr>
<!--Navigation Panel--><img width="81" height="24" align="BOTTOM" border="0" alt="next_inactive" src="file:/usr/local/lib/latex2html/icons/nx_grp_g.png"> <a name="tex2html1" href="../intro.html"><img width="26" height="24" align="BOTTOM" border="0" alt="up" src="file:/usr/local/lib/latex2html/icons/up.png"></a> <img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="file:/usr/local/lib/latex2html/icons/prev_g.png"> <br>
<b> Up:</b> <a name="tex2html2" href="../intro.html">Start</a> <!--End of Navigation Panel--> 

<address>Ralf Wiebicke 2000-05-31</address>
</body>
</html>

