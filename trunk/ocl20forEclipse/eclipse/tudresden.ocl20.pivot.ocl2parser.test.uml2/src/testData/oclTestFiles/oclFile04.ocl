--
----------------------------------------------------------------------
-- LoyaltyAccount
----------------------------------------------------------------------
package tudresden::ocl20::pivot::examples::royalsandloyals

context LoyaltyAccount::isEmpty(): Boolean 
  pre : true   
  post: result = (points = 0)

context LoyaltyAccount::points : Integer 
  init: 0
 
-- Added at 10/05/2007 15:08
context LoyaltyAccount
	def: getCostumerName():String = 'Test'

-- [AstGen] context LoyaltyAccount::transactions : Set(Transaction) 
-- [AstGen]  init: Set{}

 context LoyaltyAccount 
  inv oneOwner: transactions.card.owner->asSet()->size() = 1

 context LoyaltyAccount 
   inv: transactions->size() = 1



/*context LoyaltyAccount::totalPointsEarned : Integer 
  derive: transactions->select( oclIsTypeOf( Earning ) ) 
          .points->sum()*/

context LoyaltyAccount 
   inv points: points > 0 
               implies 
               transactions->exists(t:Transaction | t.points > 0)

  context LoyaltyAccount 
   inv transactions: transactions.points->exists(p : Integer | 
                                                p = 500 )

endpackage
