% At least, use document class book
\documentclass[a4paper]{article}

\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{eso-pic}
\usepackage{pstricks}
\usepackage{listings}
\usepackage{graphicx}

% Für Metadaten im PDF.
\usepackage[
  bookmarksnumbered=true,
  pdftitle={An Introduction into Dresden OCL2 for Eclipse},
  pdfauthor={Claas Wilke, Ronny Brandt},
  pdfcreator={TeXnicCenter},
  pdfkeywords={OCL, Dresden OCL, constraints},
  pdfsubject={A Tutorial which introduces into Dresden OCL2 for Eclipse.}
]{hyperref}
\definecolor{LinkColor}{rgb}{0,0,1}
	
\usepackage{color}
\definecolor{darkgreen}{rgb}{0,0.5,0}

% Für listings
\usepackage{listings}
\lstset{
  frame=single,
  frameround=tttt,
  xleftmargin=0.7cm,
  xrightmargin=0.3cm,
  numbers=left,
  basicstyle=\fontfamily{pcr} \small \color{black},
  keywordstyle=\bfseries \color{blue},
	stringstyle=\color{red},
	commentstyle=\color{darkgreen},
	breaklines=true,
	showstringspaces=false
}

\hypersetup{
  colorlinks=true,
  linkcolor=LinkColor,
  citecolor=LinkColor,
  filecolor=LinkColor,
  menucolor=LinkColor,
  urlcolor=LinkColor
} 

\newcommand{\reference}[1]{{\begin{ttfamily}#1\end{ttfamily}}}
\newcommand{\keyword}[1]{{\begin{itshape}#1\end{itshape}}}


\begin{document}

% Define the title of the thesis
\title{An Introduction into Dresden OCL2 for Eclipse}
% Specify the author of the thesis
\author{Claas Wilke and Ronny Brandt}
% Specify the date on which the thesis is handed in




\maketitle

This tutorial generally introduces into \keyword{Dresden OCL2 for Eclipse}. \keyword{Dresden OCL2 for Eclipse} is the last version of the \keyword{Dresden OCL Toolkit} and is based on the new infrastructure called the \keyword{pivot model}. The pivot model was developed by Matthias Bräuer and is described in his minor thesis (Großer Beleg) \cite{GB:Braeuer}. Further information about the toolkit is available at the website of the \keyword{Dresden OCL Toolkit} \cite{WWW:toolkit}.

The tutorial starts with the installation of the needed \keyword{Eclipse} plug-ins. Then it describes how to load a domain specific model and a model instance. Further activities possible with \keyword{Dresden OCL2 for Eclipse} are not in the scope of this tutorial. Documentation about such activities such as interpreting constraints or how to generate Java code for constraints can be found at \cite{WWW:toolkit}.

The procedure described in this tutorial has been realized and tested with \keyword{Eclipse 3.4.1} \cite{WWW:eclipse}. The tutorial should also run with \keyword{Eclipse 3.3.x}. Besides \keyword{Eclipse} you also need to install some required plug-ins. Table \ref{tab:software} shows all required software to run \keyword{Dresden OCL2 for Eclipse}.
  
\begin{table}
\begin{tabular}[h]{|p{5.2cm}|p{6cm}|}
    \hline
    \textbf{Software} & \textbf{Available at} \\
    \hline
    Eclipse 3.4.x & http://www.eclipse.org/ \\
    \hline
    Eclipse Modeling Framework (EMF) & http://www.eclipse.org/modeling/emf/ \\
    \hline
    Eclipse Model Development Tools (MDT) (only with the UML2.0 meta model) & http://www.eclipse.org/modeling/mdt/ \\
    \hline
    Supclipse plug-in (only to import the toolkit from the SVN) & http://subclipse.tigris.org/ \\
    \hline
    Eclipse Plugin Development Environment (only to run the toolkit using the source code distribution) & http://www.eclipse.org/pde/ \\
    \hline
\end{tabular}
\caption{Software needed to run Dresden OCL2 for Eclipse.}
\label{tab:software}
\end{table}



	
\section{How to Install Dresden OCL2 for Eclipse}
	
To use \keyword{Dresden OCL2 for Eclipse} you need to install the toolkit as \keyword{Eclipse} plug-ins, or to import them into your \keyword{Eclipse workspace}. Both possibilities are explained in the following.
	
	
\subsection{Installing Dresden OCL2 for Eclipse as JAR Files}
	
To install \keyword{Dresden OCL2 for Eclipse} as \keyword{Eclipse} plug-in, you need to have the jar archives of the toolkit. The jar archives are available at \reference{http://dresden-ocl.\linebreak[0]sourceforge.net/}. You need to copy the jar archives into the \reference{plugins} directory of your \keyword{Eclipse SDK} distribution. Then you can start the \keyword{Eclipse SDK} and you can work with \keyword{Dresden OCL2 for Eclipse}.
	
	
\subsection{Importing Dresden OCL2 for Eclipse into an Eclipse Workspace}

Alternatively you can import \keyword{Dresden OCL2 for Eclipse} as plug-in projects into an \keyword{Eclipse} workspace. Two different options exists to import the toolkit into an workspace.

On the one hand you can import the plug-ins from your file system, if you have already downloaded them (e.g. from \reference{http://sourceforge.net/\linebreak[0]projects/\linebreak[0]dresden-ocl/} as a source code distribution). One the other hand you can import the plug-ins directly from the \keyword{SVN} (\keyword{Subversion}) location of \keyword{Dresden OCL2 for Eclipse}. Both possibilities are described below.

	
\subsubsection{Import the Plug-ins from the Local File System}
	
Let's say you have the plug-ins located in a directory \reference{XYZ} of your file system. To import them into your \keyword{Eclipse} workspace you can use the \keyword{Eclipse import wizard}. Open the wizard via the menu \reference{File > Import...} and select \reference{General > Existing Projects into Workspace} (see figure \ref{pic:Import-EPiW}). In the following window you select the directory \reference{XYZ} as root. Then you select the plug-ins you want to import (if not selected automatically) and activate the check box \reference{Copy projects into workspace} (see figure \ref{pic:ImportProjects}). After pressing the \reference{Finish} button the plug-ins will be imported as projects into your workspace.
	
\begin{figure}
	\centering
	\includegraphics[width=0.8\linewidth]{figures/Import-EPiW}
	\caption{Plug-in import from local file system (1).}
	\label{pic:Import-EPiW}
\end{figure}
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.8\linewidth]{figures/ImportProjects}
	\caption{Plug-in import from local file system (2) (not all required projects are shown in the picture).}
	\label{pic:ImportProjects}
\end{figure}
	
	
\subsubsection{Import the Plug-in Projects from SVN}
	
To import the plug-ins directly from the \keyword{SVN} repository, you need to install an additionally \keyword{Eclipse} plug-in to connect with the \keyword{SVN}. The needed plug-in is called \keyword{Subclipse}. The installation of \keyword{Subclipse} is explained on the \keyword{Supclipse} website \cite{WWW:SVNInstall}.
	
\textbf{Attention: The \keyword{Subclipse} plug-in does not work with some distributions of \keyword{Eclipse 3.4}}. To access the \keyword{SVN} Repository with \keyword{Eclipse 3.4} use another \keyword{SVN} plug-in for \keyword{Eclipse} or use an external tool to access the \keyword{SVN} repository.
	
After installing \keyword{Subclipse}, a new \keyword{Eclispe perspective} for access to \keyword{SVN} should exist. The perspective can be opened via the menu \reference{Window > Open Perpective > Other... > SVN Repository Exploring}. In the view \keyword{SVN Repository} you can add a new repository (see figure \ref{pic:SVN}) using the URL \reference{https://dresden-ocl.\linebreak[0]svn.sourceforge.net/svnroot/dresden-ocl/}. After pressing the \reference{Finish} button the SVN repository root should the visible in the \keyword{repository view}.
	
To checkout the plug-ins, you now select them in the repository directory \reference{trunk/ocl20forEclipse/eclipse} and use the \reference{Checkout...} function in the context menu (see figure \ref{pic:Checkout}). The given settings could be used and after a click on the \reference{Finish} button the plug-ins should be imported.
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/SVN}
	\caption{Adding an SVN repository.}
	\label{pic:SVN}
\end{figure}
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=1.0\linewidth]{figures/Checkout}
	\caption{Checkout of the Dresden OCL2 Toolkit plug-in projects (not all plug-ins are shown in the picture).}
	\label{pic:Checkout}
\end{figure}
	
	


\section{Building the OCL2 Parser}
	
If you decided to run \keyword{Dresden OCL2 for Eclipse} as project plug-ins into your workspace, you need to build the \keyword{OCL2 Parser} via an \keyword{Ant} build script. If you installed the Toolkit using jar archives, you can skip this chapter of the tutorial.
  
To build the \keyword{OCL2 Parser} select the file \reference{build.xml} in the project \reference{tudresden.\linebreak[0]ocl20.pivot.ocl2parser} and open the context menu via a right mouse click. Select the function \reference{Run As ... > Ant Build} (see figure \ref{pic:Build}).

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=1.0\linewidth]{figures/Build}
	\caption{Executing the OCL2 parser build script.}
	\label{pic:Build}
\end{figure}
	
If an error like \reference{Problem: failed to create task or type eclipse.\linebreak[0]re\-freshLocal} occurs, you need to change the configuration of the \keyword{Ant} script. Open the function \reference{Properties} in the context menu of the \reference{build.xml}. A new window should open. Select the topic \reference{Run/Debug settings} and then the configuration for \reference{tudresden.ocl20.pivot.oclparser build.xml}. Click on the button \reference{Edit}. In the new opened window select in the sub menu \reference{JRE} the check box \reference{Run in the same JRE as the workspace} and click on the button \reference{OK} (see figure \ref{pic:AntConfig}). Afterwards the \keyword{Ant} script should be executable without errors.
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=1.0\linewidth]{figures/AntConfig}
	\caption{Settings of the JRE for the Ant build script.}
	\label{pic:AntConfig}
\end{figure}
	
After executing the build script successfully you need to update the projects in your workspace. Update the project \reference{tudresden.ocl20.pivot.oclparser} via context menu (\reference{Refresh}, see figure \ref{pic:Refresh}).

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/Refresh}
	\caption{Refreshing the project ``tudresden.ocl20.pivot.oclparser''.}
	\label{pic:Refresh}
\end{figure}
	
Additionally you need to recompile all depending projects. Select the function \reference{Project > Clean... > Clean all projects} in the \keyword{Eclipse} menu to clean all projects. Now all the projects should not contain errors anymore and should be executable.



	
\section{Loading Models into Dresden OCL2 for Eclipse}

If you installed the \keyword{Dresden OCL2 for Eclipse} using jar archives, you can execute the toolkit by starting your \keyword{Eclipse SDK}. If you imported the Toolkit as plug-in projects into an \keyword{Eclipse} workspace, you have to start a new \keyword{Eclipse SDK} instance. You can start a new instance via the menu \reference{Run > Run As > Eclipse Application}. If the menu \reference{Eclipse Application} is not available or disabled you need to select one of the plug-ins of the toolkit first.

This tutorial explains \keyword{Dresden OCL2 for Eclipse} using the \keyword{Simple Example} which is located in the plug-in package \reference{tudresden.ocl20.pivot.examples.\linebreak[0]simple}. Figure \ref{pic:Simple} shows the class diagram of the \keyword{Simple Example}.

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/simpleExample}
	\caption{The class diagram described by the simple example model.}
	\label{pic:Simple}
\end{figure}

\keyword{Dresden OCL2 for Eclipse} provides more examples than the \keyword{Simple Example}. The different examples use different meta models which is possible with the \textit{pivot-model} architecture of the toolkit. An overview about all examples provided with \keyword{Dresden OCL2 for Eclipse} can be found in \cite{tut:examples}.

The \keyword{Simple example} can be used with two different meta models. These are \keyword{UML 1.5} (based on \keyword{Netbeans MDR}) and \keyword{UML 2.0} (based on \keyword{Eclipse MDT UML2}).
	
	
\subsection{Loading a Domain-Specific Model}
	
After starting \keyword{Eclipse} you have to load a model into the toolkit. 

If the plug-ins of \keyword{Dresden OCL2 for Eclipse} were installed as jar archives, the \keyword{Simple example} plug-in has to be imported into the \keyword{Workspace} first. Create a new Java project into your \keyword{Workspace} and select the \keyword{import wizard} \reference{General > Archive File}. In the following window select the \reference{plugins} directory in your \keyword{Eclipse} root folder, select the archive \reference{tudresden.ocl20.pivot.examples.\linebreak[0]simple\_1.0.0.jar} and click the \reference{Finish} button.

Now you can load a model. Select the menu option \reference{Dresden OCL2 > Load Model}. In the opened wizard you have to select a model file and a meta model for the model (see figure \ref{pic:LoadModel}). Click the button \reference{Browse Workspace...} and select the file \reference{model/simple.uml} inside the \keyword{Simple example project}. Then select the meta model \keyword{UML2} and press the button \reference{Finish}.

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.8\linewidth]{figures/LoadModel}
	\caption{Loading a domain specific model.}
	\label{pic:LoadModel}
\end{figure}
	
Figure \ref{pic:MoBrOE} shows the loaded \keyword{simple} model, which uses \keyword{UML2} as its meta model. Via the menu button of the \keyword{Model Browser} (the little triangle in the right top corner) you can switch between different models (see figure \ref{pic:SwitchModel}).
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/MoBrOE}
	\caption{The loaded simple example model in the model browser.}
	\label{pic:MoBrOE}
\end{figure}

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=1.0\linewidth]{figures/SwitchModel}
	\caption{You can switch between different models using the little triangle.}
	\label{pic:SwitchModel}
\end{figure}

	
\subsection{Loading a Model Instance}
	
After loading the model, you can load a \keyword{model instance} using another \keyword{wizard}. Use the menu option \reference{Dresden OCL2 > Load Model Instance}. In the opened wizard you have to select a model instance (in this tutorial we used the file \reference{bin/tudresden/ocl20/\linebreak[0]pivot/examples/ModelProviderClass.class} of the \keyword{simple example} and a domain-specific model loaded before (see figure \ref{pic:LoadInstance}).

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.8\linewidth]{figures/LoadInstance}
	\caption{Loading a simple model instance.}
	\label{pic:LoadInstance}
\end{figure}
	
Figure \ref{pic:MoInBr} shows the loaded model instance of the \keyword{simple example} model. Like in the model browser you can switch between different model instances. Note that the model instance browser only shows the model instances of the model actually selected in the model browser. By switching the domain specific model, you also switch the pool of model instances available in the model instance browser.

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/MoInBr}
	\caption{A simple model instance in the Model Instance Browser.}
	\label{pic:MoInBr}
\end{figure}

	
\subsection{Parsing OCL expressions}
	
Before you can interpret OCL constraints you have to load them like the domain-specific model and the model instance before. Use the menu option \reference{Dresden OCL2 > OCL Expressions} and select an OCL file (in this tutorial we used the OCL file \reference{constraints/invariants.ocl} of the \keyword{simple example}, see figure \ref{pic:LoadExpressions}). The constraints of the file \reference{constraints/invariants.ocl} are shown in listing \ref{list:invariants}.

\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.8\linewidth]{figures/LoadExpressions}
	\caption{The import of OCL expressions.}
	\label{pic:LoadExpressions}
\end{figure}
	
\lstset{
  language=OCL
}
\begin{lstlisting}[caption={The invariants of the simple examples.}, captionpos=b, label=list:invariants, float]
package tudresden::ocl20::pivot::examples::simple

-- The age of Person can't be negative.
context Person
inv: age >= 0

-- Students should be 16 or older.
context Student
inv: age > 16

-- Proffesors should be at least 30.
context Professor
inv: not (age < 30)

endpackage
\end{lstlisting}

	
The expressions of the selected OCL file will be loaded into the actually selected model instance. Figure \ref{pic:MoBrME} shows the \reference{Model Browser} containing the model and the parsed expressions.
	
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=0.5\linewidth]{figures/MoBrME}
	\caption{Parsed expressions and the model in the Model Browser.}
	\label{pic:MoBrME}
\end{figure}
	

	

\section{Conclusion}
  
This tutorial described how to use \keyword{Dresden OCL2 for Eclipse}. It explained how to install or import and start the Toolkit's plug-ins. Afterwards the loading of domain-specific models, model instances and OCL constraints into the toolkit has been explained.

Now the imported models can be used to use the tools provided with \keyword{Dresden OCL2 for Eclipse}. For example you can use the OCL2 Interpreter of \keyword{Dresden OCL2 for Eclipse} to interpret OCL constraints for a given model and model instance. Tutorials how to use the OCL2 Interpreter and the other tools provided with \keyword{Dresden OCL2 for Eclipse} can be found at \cite{WWW:toolkit} in the \keyword{Dresden OCL2 for Eclipse > usage} section.




\newpage
\bibliographystyle{alphadin}
\bibliography{tutorial}
% Literaturliste in Inhalt aufnehmen.
\addcontentsline{toc}{section}{References}




\end{document}