<html>
<head>
	<title>Dresden OCL Toolkit</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

	<style>
		H1 {
		 BORDER-TOP-WIDTH: 1px; PADDING-RIGHT: 2pt; PADDING-LEFT: 2pt; FONT-WEIGHT: 
bold; BORDER-LEFT-WIDTH: 1px; BORDER-LEFT-COLOR: #fff; BORDER-BOTTOM-WIDTH: 1px; 

BORDER-BOTTOM-COLOR: #fff; PADDING-BOTTOM: 2pt; WIDTH: 100%; BORDER-TOP-COLOR: 
#fff; PADDING-TOP: 2pt; FONT-FAMILY: Helvetica,Helv,Arial; BORDER-RIGHT-WIDTH: 
1px; BORDER-RIGHT-COLOR: #fff
		}
		H2 {
		 BORDER-TOP-WIDTH: 1px; PADDING-RIGHT: 2pt; PADDING-LEFT: 2pt; FONT-WEIGHT: 
bold; BORDER-LEFT-WIDTH: 1px; BORDER-LEFT-COLOR: #fff; BORDER-BOTTOM-WIDTH: 1px; 

BORDER-BOTTOM-COLOR: #fff; PADDING-BOTTOM: 2pt; WIDTH: 100%; BORDER-TOP-COLOR: 
#fff; PADDING-TOP: 2pt; FONT-FAMILY: Helvetica,Helv,Arial; BORDER-RIGHT-WIDTH: 
1px; BORDER-RIGHT-COLOR: #fff
		}
		H3 {
		 BORDER-TOP-WIDTH: 1px; PADDING-RIGHT: 2pt; PADDING-LEFT: 2pt; FONT-WEIGHT: 
bold; BORDER-LEFT-WIDTH: 1px; BORDER-LEFT-COLOR: #fff; BORDER-BOTTOM-WIDTH: 1px; 

BORDER-BOTTOM-COLOR: #fff; PADDING-BOTTOM: 2pt; WIDTH: 100%; BORDER-TOP-COLOR: 
#fff; PADDING-TOP: 2pt; FONT-FAMILY: Helvetica,Helv,Arial; BORDER-RIGHT-WIDTH: 
1px; BORDER-RIGHT-COLOR: #fff
		}
		H4 {
		 BORDER-TOP-WIDTH: 1px; PADDING-RIGHT: 2pt; PADDING-LEFT: 2pt; FONT-WEIGHT: 
bold; BORDER-LEFT-WIDTH: 1px; BORDER-LEFT-COLOR: #fff; BORDER-BOTTOM-WIDTH: 1px; 

BORDER-BOTTOM-COLOR: #fff; PADDING-BOTTOM: 2pt; WIDTH: 100%; BORDER-TOP-COLOR: 
#fff; PADDING-TOP: 2pt; FONT-FAMILY: Helvetica,Helv,Arial; BORDER-RIGHT-WIDTH: 
1px; BORDER-RIGHT-COLOR: #fff
		}
		H1 {
		 PADDING-RIGHT: 5pt; PADDING-LEFT: 5pt; FONT-SIZE: 24pt; BACKGROUND: #eef; 
PADDING-BOTTOM: 5pt; COLOR: #006; PADDING-TOP: 5pt
		}
		H2 {
		 FONT-SIZE: 18pt; BACKGROUND: #eef
		}
		H3 {
		 FONT-SIZE: 14pt; BACKGROUND: #eee
		}
		H4 {
		 FONT-SIZE: 12pt
		}
		</style>

</head>

<body bgcolor="white">

<h1>example</h1>

The OCL compiler has been integrated into the open-source CASE tool Argo/UML by 
Steffen Zschaler.
Below you can find an example on how the integration works. The example also 
shows how code
injection works with the according injector tool. If you want to test the 
example
by yourself, please refer to the <a href="download.html">download page</a> and 
install the
necessary files.

<h2>step 1: create the project</h2>
After the start of Argo/UML, create the UML diagramm and OCL constraint (<a 
href="OCLInjectorExample.zargo">OCLInjectorExample.zargo</a>):
<p>
<a href="images/screenshot_1.gif" target="blank"><img 
src="images/screenshot_1_small.gif" border=0></a>

<h2>step 2: generate Java code</h2>
Generate code for all classes by selecting the according menu item:
<p>
<a href="images/screenshot_2.gif" target="blank"><img 
src="images/screenshot_2_small.gif" border=0></a>
<p>
Specify the path where to store the generated classes and press "Generate":
<p>
<a href="images/screenshot_3.gif" target="blank"><img 
src="images/screenshot_3_small.gif" border=0></a>
<p>
The code has been generated (<a href="Person1.java" 
target="blank">Person1.java</a>) and looks like this:
<p>
<img src="images/screenshot_4.gif">
<p>

<h2>step 3: personal modifications</h2>
Modify the code for your purposes, e.g. add constructor and main methode (<a 
href="Person2.java" target="blank">Person2.java</a>):
<p>
<table border=1>
	<tr><td>
	<CODE><PRE>
// FILE: /home/steffen/projects/ArgoUML/tests/test/Person.java

package test;
import java.util.*;

/** A class that represents ...
   *
   * @see OtherClasses
   * @author your_name_here
   * @invariant unnamedConstraint_0: married implies ( age >= 18 )
   */
class Person
{
  // Attributes

  /** An attribute that represents ...
   */
  public  int age;

  /** An attribute that represents ...
   */
  public  boolean married;

  // Associations

  // Operations

  public Person() {
    super();

    age = 17;
    married = true;
  }

  public String toString() {
    return
      ((married)?
       ("Married person"):
       ("Person")
      ) +
      ": age = " + age;
  }

  public static void main (String[] args) {
    Person p = new Person();

    System.out.println ("Created new person:");
    System.out.println (p);
  }
} /* end class Person */
	</CODE></PRE>
	</td></tr>
</table>

<h2>step 4: run the example </h2>
Compile the source and start the program.
<p>
<img src="images/screenshot_5.gif">

<h2>step 5: run the injector tool</h2>
Run the injector tool to modify the source according to the specified OCL 
invariant:
<p>
<img src="images/screenshot_6.gif">
<p>
The resulting code looks like this (<a href="Person3.java" 
target="blank">Person3.java</a>):
<p>
<table border=1>
	<tr><td>
	<CODE><PRE>
// FILE: /home/steffen/projects/ArgoUML/tests/test/Person.java

package test;
import java.util.*;

/** A class that represents ...
   *
   * @see OtherClasses
   * @author your_name_here
   * @invariant unnamedConstraint_0: married implies ( age >= 18 )
   */
class Person
{
  // Attributes

  /** An attribute that represents ...
   */
  public  int age;

  /** An attribute that represents ...
   */
  public  boolean married;

  // Associations

  // Operations

  public Person(tudresden.ocl.injection.lib.WrapperDummy wrappedbyocl) {
    super();

    age = 17;
    married = true;
  }

  public String toString_wrappedbyocl_test_Person() {
    return
      ((married)?
       ("Married person"):
       ("Person")
      ) +
      ": age = " + age;
  }

  public static void main (String[] args) {
    Person p = new Person();

    System.out.println ("Created new person:");
    System.out.println (p);
  }
/**
A wrapper for injection. Generated automatically, DO NOT CHANGE!
@author ocl_injector
@see #Person(tudresden.ocl.injection.lib.WrapperDummy)
*/public Person(){
this((tudresden.ocl.injection.lib.WrapperDummy)null);
try{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=true;
tudresden.ocl.injection.ocl.lib.Invariant.checkVacantInvariants();
}finally{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=false;}
}/**
A wrapper for injection. Generated automatically, DO NOT CHANGE!
@author ocl_injector
@see #toString_wrappedbyocl_test_Person()
*/public String toString(){
String result;
if(tudresden.ocl.injection.ocl.lib.Invariant.checking_flag)
result=toString_wrappedbyocl_test_Person();
else{
checkForChangedFeatures();
try{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=true;
tudresden.ocl.injection.ocl.lib.Invariant.checkVacantInvariants();
}finally{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=false;}
result=toString_wrappedbyocl_test_Person();
checkForChangedFeatures();
try{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=true;
tudresden.ocl.injection.ocl.lib.Invariant.checkVacantInvariants();
}finally{tudresden.ocl.injection.ocl.lib.Invariant.checking_flag=false;}
}
return result;
}/**
A backup for detecting modifications. Generated automatically, DO NOT CHANGE!
@author ocl_injector
@see #age
*/private int age_oclbackup812374=age;/**
Contains observers for modifications of this feature. Generated automatically, 
DO NOT CHANGE!
@author ocl_injector
@see #age
*/public final java.util.HashSet age_oclobservinginvariants812374=new 
java.util.HashSet();/**
A backup for detecting modifications. Generated automatically, DO NOT CHANGE!
@author ocl_injector
@see #married
*/private boolean married_oclbackup812374=married;/**
Contains observers for modifications of this feature. Generated automatically, 
DO NOT CHANGE!
@author ocl_injector
@see #married
*/public final java.util.HashSet married_oclobservinginvariants812374=new 
java.util.HashSet();/**
Checks object features, whether they have changed. Generated automatically, DO 
NOT CHANGE!
@author ocl_injector
*/private void checkForChangedFeatures(){
if(age!=age_oclbackup812374){age_oclbackup812374=age;
tudresden.ocl.injection.ocl.lib.Invariant.notifyObservingInvariants(age_oclobservinginvariants812374);
}
if(married!=married_oclbackup812374){married_oclbackup812374=married;
tudresden.ocl.injection.ocl.lib.Invariant.notifyObservingInvariants(married_oclobservinginvariants812374);
}
}/**
An object representing ocl invariant unnamedConstraint_0 on this object. 
Generated automatically, DO NOT CHANGE!
@author ocl_injector
*/private final tudresden.ocl.injection.ocl.lib.Invariant 
zzzCheckOclInvariantObject812374_unnamedConstraint_0=new 
tudresden.ocl.injection.ocl.lib.Invariant("unnamedConstraint_0", this);/**
Checks ocl invariant unnamedConstraint_0 on this object. Generated 
automatically, DO NOT CHANGE!
@author ocl_injector
*/public final void zzzCheckOclInvariantMethod812374_unnamedConstraint_0(){
tudresden.ocl.lib.OclAnyImpl.setFeatureListener(zzzCheckOclInvariantObject812374_unnamedConstraint_0);
final tudresden.ocl.lib.OclAnyImpl 
tudOclNode0=tudresden.ocl.lib.Ocl.toOclAnyImpl( 
tudresden.ocl.lib.Ocl.getFor(this) );
final tudresden.ocl.lib.OclBoolean 
tudOclNode1=tudresden.ocl.lib.Ocl.toOclBoolean(tudOclNode0.getFeature("married"));
final tudresden.ocl.lib.OclInteger 
tudOclNode2=tudresden.ocl.lib.Ocl.toOclInteger(tudOclNode0.getFeature("age"));
final tudresden.ocl.lib.OclInteger tudOclNode3=new 
tudresden.ocl.lib.OclInteger(18);
final tudresden.ocl.lib.OclBoolean 
tudOclNode4=tudOclNode2.isGreaterEqual(tudOclNode3);
final tudresden.ocl.lib.OclBoolean tudOclNode5=tudOclNode1.implies(tudOclNode4);
tudresden.ocl.lib.OclAnyImpl.clearFeatureListener();
if(!tudOclNode5.isTrue())System.out.println("violated ocl invariant 
'unnamedConstraint_0' on object '"+this+"'.");
}} /* end class Person */
	</CODE></PRE>
	</td></tr>
</table>

<h2>step 6: run the example again</h2>
Compile and start again.
<p>
<img src="images/screenshot_7.gif">

</body>
</html>
